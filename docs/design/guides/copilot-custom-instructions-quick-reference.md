# GitHub Copilot カスタム命令 クイックリファレンス

このドキュメントは、`.github/copilot-instructions.md` を効果的に作成・維持するためのクイックリファレンスです。

## 📚 詳細ガイド

完全なベストプラクティスガイドは以下を参照してください：

- **日本語**: [copilot-custom-instructions-best-practices.md](./copilot-custom-instructions-best-practices.md)
- **English**: [copilot-custom-instructions-best-practices.en.md](./copilot-custom-instructions-best-practices.en.md)

## ✅ 作成チェックリスト

新しいカスタム命令を作成する際は、以下を確認してください：

```markdown
- [ ] プロジェクト概要を含めているか
- [ ] ドメイン固有の設計原則を記載しているか
- [ ] 普遍的な設計原則（SOLID等）を含めているか
- [ ] 具体的なコード例を提供しているか
- [ ] 良い例と悪い例を対比しているか
- [ ] 実装手順を段階的に記載しているか
- [ ] ツールとコマンドを記載しているか
- [ ] 最終更新日を記載しているか
- [ ] YAMLフロントマターで適用範囲を限定しているか（必要な場合）
- [ ] 500-1500行の範囲内に収まっているか
```

## 🏗️ 推奨構造

```markdown
---
applyTo: '.py, .ipynb'  # オプション: 特定のファイルタイプに限定
---

# プロジェクト名 開発ガイドライン

**最終更新**: YYYY年MM月DD日

## プロジェクト概要
[プロジェクトの簡潔な説明]

## 設計原則
### ドメイン固有の原則
1. **原則1**: 説明
2. **原則2**: 説明

### 普遍的な設計原則
#### SOLID原則
#### YAGNI/KISS/DRY

## コーディング規約
### 1. 型ヒント
### 2. エラーハンドリング
### 3. テスト
### 4. ドキュメンテーション

## コード変更時の手順
### 1. 変更プランの作成
### 2. 変更プランのレビュー
### 3. テスト駆動開発
### 4. 実装とテストの反復
### 5. 最終確認

## ツールとワークフロー
### 開発環境セットアップ
### コード品質チェック

## ベストプラクティス集
### 1. メソッドチェーンの実装
### 2. 型ヒントの活用
[その他のパターン]

## よくある質問（FAQ）

## トラブルシューティング

## 参考資料
```

## 💡 重要なポイント

### 1. 明確な例を提供する

```markdown
# ✅ 良い例
### メソッドチェーン
\`\`\`python
# 良い例: メソッドチェーンが可能
signal = (
    wd.read_wav("audio.wav")
    .normalize()
    .low_pass_filter(cutoff=1000)
)

# 悪い例: メソッドチェーン不可
signal = wd.read_wav("audio.wav")
normalize(signal)
\`\`\`

# ❌ 悪い例
### メソッドチェーン
メソッドチェーンを使ってください。
```

### 2. 具体的な指示を記載する

```markdown
# ✅ 良い例
- **すべての関数・メソッドに型ヒントを必須で付与**してください
- **カバレッジ100%を目標**にしてください（最低90%以上）

# ❌ 悪い例
- 型ヒントを使ってください
- カバレッジを高くしてください
```

### 3. 段階的な手順を提供する

```markdown
# ✅ 良い例
## コード変更時の手順

### 1. 変更プランの作成
- **変更プランを記載したMarkdownファイルを作成**してください
- ファイル名: `docs/design/working/plans/PLAN_<機能名>.md`
- プランには以下の内容を**すべて**含めてください：
  - **変更の目的と背景**: なぜこの変更が必要か
  - **実装方針と技術的な詳細**: どのように実装するか

### 2. 変更プランのレビュー
実装前に以下の観点で**必ず**レビューを実施してください：

#### 設計チェックリスト
- [ ] 設計原則に沿っているか
- [ ] 後方互換性は保たれているか
```

### 4. 適切なサイズを保つ

- **理想**: 500-1500行
- **最大**: 2000行程度
- それ以上の場合は、内容を分割し外部ドキュメントにリンク

## 🔧 メンテナンス

### 定期的な見直し

**推奨頻度**: 3-6ヶ月ごと

```markdown
## レビューチェックリスト

### 内容の妥当性
- [ ] 古くなった情報はないか
- [ ] 新しいツールやベストプラクティスを反映しているか
- [ ] プロジェクトの現状に合っているか

### 構成の改善
- [ ] 読みにくいセクションはないか
- [ ] 重複する内容はないか
- [ ] 追加すべき情報はないか
```

### 更新履歴の記録

```markdown
# Wandas プロジェクト開発ガイドライン

**最終更新**: 2025年11月2日

## 変更履歴

- 2025年11月2日: 数値検証の原則を追加
- 2025年10月18日: ドキュメントライフサイクルルールを追加
- 2025年10月1日: 初版作成
```

## ⚠️ よくある落とし穴

### 1. 過度に詳細すぎる

❌ すべての関数の実装方法を記載する
✅ パターンを示す

### 2. 曖昧な指示

❌ 「コードは綺麗に書いてください」
✅ 「**すべての関数に型ヒントを必須で付与**してください」

### 3. 例がない

❌ 「メソッドチェーンを使ってください」
✅ 良い例と悪い例を対比したコード例を提供

### 4. 更新されていない情報

❌ 古いコマンドやAPIが記載されている
✅ 最終確認日を記載し、定期的に更新

### 5. 一貫性のない用語

❌ dataframe / DataFrame / data frame がバラバラ
✅ プロジェクトの型名に統一（例: ChannelFrame）

## 📖 参考資料

### プロジェクト内

- [完全なベストプラクティスガイド（日本語）](./copilot-custom-instructions-best-practices.md)
- [Complete Best Practices Guide (English)](./copilot-custom-instructions-best-practices.en.md)
- [設計ドキュメント一覧](../INDEX.md)
- [実例: Wandas copilot-instructions.md](../../../.github/copilot-instructions.md)

### 公式ドキュメント

- [GitHub Copilot Documentation](https://docs.github.com/en/copilot)
- [GitHub Copilot Custom Instructions](https://docs.github.com/en/copilot/customizing-copilot/adding-custom-instructions-for-github-copilot)

---

**Note**: このクイックリファレンスは要点をまとめたものです。詳細は完全版のガイドを参照してください。
